define(["jquery"],function(a){var b,c={url:"http://eexcess-dev.joanneum.at/eexcess-privacy-proxy-1.0-SNAPSHOT/api/v1/recommend",timeout:1e4,cacheSize:10},d=[],e=function(a){d.length===c.cacheSize&&d.shift(),d.push(a)};return{init:function(b){c=a.extend(c,b)},query:function(d,f){b&&4!==b.readyState&&b.abort(),b=a.ajax({url:c.url,data:JSON.stringify(d),type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",timeout:c.timeout}),b.done(function(a){a.profile=d,e(a),"undefined"!=typeof f&&f({status:"success",data:a})}),b.fail(function(a,b,c){"abort"!==b&&(console.log(a),console.log(b),console.log(c),"undefined"!=typeof f&&f({status:"error",data:b}))})},getCache:function(){return d},getCurrent:function(){return d.length>0?d[d.length-1]:null}}});