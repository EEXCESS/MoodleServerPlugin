define(["jquery"],function(a){var b,c={base_url:"http://eexcess-dev.joanneum.at/eexcess-privacy-proxy-1.0-SNAPSHOT/api/v1/",favicon_url:"http://eexcess-dev.joanneum.at/eexcess-federated-recommender-web-service-1.0-SNAPSHOT/recommender/getPartnerFavIcon?partnerId=",timeout:1e4,cacheSize:10,suffix_recommend:"recommend",suffix_details:"getDetails"},d=[],e=function(a){d.length===c.cacheSize&&d.shift(),d.push(a)};return{init:function(b){c=a.extend(c,b)},query:function(d,f){b&&4!==b.readyState&&b.abort(),b=a.ajax({url:c.base_url+c.suffix_recommend,data:JSON.stringify(d),type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",timeout:c.timeout}),b.done(function(a){console.log(a),a.profile=d,a.faviconURL=c.favicon_url,e(a),"undefined"!=typeof f&&f({status:"success",data:a})}),b.fail(function(a,b,c){"abort"!==b&&(console.log(a),console.log(b),console.log(c),"undefined"!=typeof f&&f({status:"error",data:b}))})},getDetails:function(b,d){var e=a.ajax({url:c.base_url+c.suffix_details,data:JSON.stringify({documentBadge:b}),type:"POST",contentType:"application/json; charset=UTF-8",dataType:"json",timeout:c.timeout});e.done(function(a){d({status:"success",data:a})}),e.fail(function(a,b,c){"abort"!==b&&(console.log(a),console.log(b),console.log(c),"undefined"!=typeof d&&d({status:"error",data:b}))})},getCache:function(){return d},getCurrent:function(){return d.length>0?d[d.length-1]:null}}});